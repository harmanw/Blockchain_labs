pragma solidity 0.4.13;


contract DAO {
    
    mapping (address => uint256) public balances;

    function DAO () payable {}
    
    function createAccount() {
        balances[msg.sender] = 0;
    }
    
    function deposit() payable{
        balances[msg.sender] += msg.value;
    }
    
    function withdraw(uint x) payable{
        if (balances[msg.sender] >= x) {
            msg.sender.call.value(x)();   // Calls callback function in Attacker
            balances[msg.sender] -=x;  // swap this line with previous line for fix :)
        }
    } 
    
    function getBalance() public returns (uint) { return this.balance; }
    
}
